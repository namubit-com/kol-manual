<!doctype html><html lang="ja" data-theme="dark"><head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NAMUBIT ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” Binance ã¨ OKX ã‚’çµ±åˆå–å¼•</title>
  <meta name="description" content="1ã¤ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ Binance ã¨ OKX ã®ç¾ç‰©ãƒ»å…ˆç‰©ã‚’å–å¼•ã€‚KYC ã¯ 1 å›ã€å®‰å¿ƒã®ã‚«ã‚¹ãƒˆãƒ‡ã‚£ã€ã‚¹ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚" />
  <link rel="canonical" href="https://www.namubit.com/ja/dashboard" />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <link rel="alternate" href="https://www.namubit.com/ja/dashboard" hreflang="ja" />
  <link rel="alternate" href="https://www.namubit.com/en/dashboard" hreflang="en" />
  <link rel="alternate" href="https://www.namubit.com/" hreflang="x-default" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="NAMUBIT ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” Binance ã¨ OKX ã‚’çµ±åˆå–å¼•" />
  <meta property="og:description" content="1ã¤ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ Binance ã¨ OKX ã®ç¾ç‰©ãƒ»å…ˆç‰©ã‚’å–å¼•ã€‚KYC ã¯ 1 å›ã€å®‰å¿ƒã®ã‚«ã‚¹ãƒˆãƒ‡ã‚£ã€ã‚¹ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚" />
  <meta property="og:url" content="https://www.namubit.com/ja/dashboard" />
  <meta property="og:image" content="https://www.namubit.com/ja/dashboard/og.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NAMUBIT ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” Binance ã¨ OKX ã‚’çµ±åˆå–å¼•" />
  <meta name="twitter:description" content="1ã¤ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ Binance ã¨ OKX ã®ç¾ç‰©ãƒ»å…ˆç‰©ã‚’å–å¼•ã€‚KYC ã¯ 1 å›ã€å®‰å¿ƒã®ã‚«ã‚¹ãƒˆãƒ‡ã‚£ã€ã‚¹ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚" />
  <meta name="twitter:image" content="https://www.namubit.com/ja/dashboard/og.png" />

  <link rel="preconnect" href="https://www.namubit.com" crossorigin />
  <link rel="preconnect" href="https://www.binance.com" crossorigin />
  <link rel="preconnect" href="https://www.okx.com" crossorigin />

  <link rel="icon" sizes="32x32" href="/favicon-32.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "Organization", "name": "NAMUBIT", "url": "https://www.namubit.com/", "logo": "https://www.namubit.com/assets/logo.png", "sameAs": ["https://x.com/", "https://www.linkedin.com/", "https://t.me/"]}</script>
  <script type="application/ld+json">{"@context": "https://schema.org", "@type": "WebSite", "name": "NAMUBIT", "url": "https://www.namubit.com/ja/dashboard", "potentialAction": {"@type": "SearchAction", "target": "https://www.namubit.com/ja/dashboardsearch?q={query}", "query-input": "required name=query"}}</script>

<style>
:root{ --radius:20px; --ring:0 0 0 3px rgba(37,99,235,.35); }
:root,[data-theme=dark]{ --primary:#2563eb; --primary-600:#1d4ed8; --accent:#ef4444; --spot:#2563eb;
  --bg:#0b1220; --card:#0f172a; --muted:#64748b; --text:#e2e8f0; --border:#172036;
  
  --text-strong:#e6edf3;
  --text-muted:#cbd5e1;
  --surface-2:#0b1324;
  --surface-3:#0f172a;
  --border-strong:#243249;
  --shadow:0 10px 30px rgba(0,0,0,.25); --page-grad:radial-gradient(1200px 800px at 20% -10%, #1f2937 0%, #0b1220 55%, #05070d 100%);
  --up:#10b981; --down:#ef4444; --chip:#0b1324;
}
[data-theme=light]{ --primary:#2563eb; --primary-600:#1d4ed8; --accent:#dc2626; --spot:#1d4ed8;
  --bg:#f8fafc; --card:#ffffff; --muted:#475569; --text:#0f172a; --border:#e2e8f0;
  
  --text-strong:#0f172a;
  --text-muted:#334155;
  --surface-2:#ffffff;
  --surface-3:#f8fafc;
  --border-strong:#cbd5e1;
  --shadow:0 8px 20px rgba(2,6,23,.08); --page-grad:linear-gradient(180deg,#f8fafc,#f1f5f9);
  --up:#059669; --down:#b91c1c; --chip:#fff;
}
*{box-sizing:border-box} html,body{min-height:100vh} body{
  margin:0; font-family:Meiryo, system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial,sans-serif;
  background:var(--page-grad); color:var(--text); line-height:1.5;
}
.container{max-width:1200px;margin:0 auto;padding:24px}
.topbar{display:flex;gap:12px;justify-content:flex-end;align-items:center;margin:6px 0 0}
.toggle{border:1px solid var(--border);border-radius:999px;padding:6px 10px;cursor:pointer;background:var(--card);color:var(--text-muted);font-weight:700}
.hero{display:grid;grid-template-columns:1fr .95fr;gap:24px;align-items:stretch;margin-top:16px}
.headline{font-size:36px;font-weight:800;margin:0}
.sub{color:var(--text-muted);margin:10px 0 18px}
.badge{font-size:12px;color:var(--text-muted);background:var(--card);border:1px solid var(--border);padding:6px 10px;border-radius:999px}
.badges{display:flex;gap:10px;flex-wrap:wrap;margin:14px 0 0}
.btn{display:inline-flex;align-items:center;gap:8px;background:var(--primary);color:white;padding:12px 16px;border-radius:12px;border:none;font-weight:700;cursor:pointer;transition:.2s transform ease,.2s background ease,.2s box-shadow ease;box-shadow:0 8px 24px color-mix(in oklab, var(--primary), transparent 70%)}
.btn:hover{background:var(--primary-600);transform:translateY(-1px)}
.btn:focus-visible{outline:none;box-shadow:var(--ring)}
.auth{display:flex;flex-direction:column;justify-content:center;min-height:360px;background:linear-gradient(180deg,var(--card),color-mix(in oklab,var(--card) 90%,transparent));border:1px solid var(--border);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow)}
.auth h2{margin:0 0 10px;font-size:20px}
.field{display:flex;flex-direction:column;gap:8px;margin:12px 0}
.field label{font-size:13px;color:var(--muted)}
.input{background:var(--surface-2);border:1px solid var(--border-strong);color:var(--text-strong);padding:12px;border-radius:12px;transition:.2s border-color ease,.2s box-shadow ease;font-size:16px}
.input:focus{outline:none;border-color:#2f4466;box-shadow:var(--ring)}
.input::placeholder{color:var(--muted)}
.help{font-size:12px;color:#93c5fd}
.strip{margin-top:22px}
.card{background:linear-gradient(180deg,var(--card),color-mix(in oklab,var(--card) 90%,transparent));border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column;min-height:100%}
.card h3{margin:0 0 10px;font-size:16px;color:var(--text-muted);font-weight:700}
.pill-row{display:flex;gap:12px;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border-strong);padding:10px 12px;border-radius:12px;transition:.2s transform ease,.2s border-color ease,.2s background ease;background:var(--surface-2);border-color:#2f4466}
.pill .tag{font-size:12px;padding:4px 8px;border-radius:999px;color:white}
.tag.futures{background:#ef4444}.tag.spot{background:#2563eb}
.go{font-size:13px;font-weight:700}
.sections{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:18px}
.tile{padding:18px;border-radius:var(--radius);background:linear-gradient(180deg,rgba(17,24,39,.75),rgba(7,11,22,.75));border:1px solid var(--border)}
.tile h4{margin:0 0 8px;font-size:15px}
@media (max-width:980px){.hero{grid-template-columns:1fr}.auth{min-height:auto}.sections{grid-template-columns:1fr}}
.muted{color:var(--text-muted);font-size:14px}
.grid{display:grid;grid-template-columns:1.2fr 1fr;gap:20px;align-items:stretch}
.balance{display:flex;align-items:baseline;gap:10px;flex-wrap:wrap;font-weight:800;font-size:28px;letter-spacing:.3px}
.delta{font-weight:700;font-size:14px;padding:4px 8px;border-radius:8px;}
.cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btn.secondary{background:var(--card);color:var(--text-strong);border:1px solid var(--border);box-shadow:none}
.tiles{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:14px}
@media (max-width:980px){.grid{grid-template-columns:1fr}.tiles{grid-template-columns:1fr}}

[data-theme=light] .btn.secondary{ color:var(--primary-600); border-color:var(--border-strong); }

/* Light theme readability overrides for tiles */
[data-theme=light] .tile{
  background:linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card) 92%, transparent));
  border-color:var(--border-strong);
}
[data-theme=light] .tile h4{ color:var(--text-strong); }
[data-theme=light] .tile p,
[data-theme=light] .tile .sub,
[data-theme=light] .tile .muted{ color:var(--text-muted); }

/* High-contrast delta chip (theme-aware, no green background) */
.delta{
  background: transparent;
  color: var(--text-strong);
  border: 1px solid var(--border-strong);
}
[data-theme=light] .delta{ 
  color: var(--text-strong);
  border-color: var(--border-strong);
}
[data-theme=dark] .delta{ 
  color: var(--text);
  border-color: color-mix(in oklab, var(--text), transparent 60%);
}

/* === Quick Trade: 2Ã—2 grid + equal-size pills (both mobile & desktop) === */
.pill-row{ display:grid !important; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px; }
.pill{ width:100%; min-height:48px; padding:10px 14px; justify-content:space-between; align-items:center; text-decoration:none; border-width:2px; }
.pill:link, .pill:visited{ color:var(--text-strong); }
.pill strong{ color:var(--text-strong); font-weight:800; }
.pill .go, .pill .muted{ color:var(--text-muted); }
[data-theme=light] .pill{ border-color:var(--border-strong); background:var(--card); }
[data-theme=dark] .pill{ border-color:color-mix(in oklab, var(--text), transparent 55%); background:color-mix(in oklab, var(--card) 90%, transparent); }
/* keep 2Ã—2 on small screens */
@media (max-width:520px){
  .pill-row{ grid-template-columns:repeat(2, minmax(0,1fr)); }
}

/* --- Market Search + Results styles --- */
.search-wrap{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin:10px 0 6px }
.results{ margin-top:12px; display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px }
@media (max-width:680px){ .results{ grid-template-columns: 1fr } }

.quote{ border:1px solid var(--border-strong); border-radius:14px; padding:14px; background:linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card) 88%, transparent)) }
.quote .row{ display:flex; justify-content:space-between; align-items:baseline; gap:10px }
.quote .ex{ font-weight:800; font-size:14px; letter-spacing:.2px }
.quote .inst{ font-size:12px; color:var(--muted) }
.quote .px{ font-weight:900; font-size:22px }
.quote .cta{ display:inline-flex; gap:8px; align-items:center; margin-top:10px; font-weight:700; text-decoration:none }

.diffs{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; margin-top:12px }
@media (max-width:680px){ .diffs{ grid-template-columns: 1fr } }
.diff{ border:1px dashed var(--border-strong); border-radius:12px; padding:12px; background:var(--chip) }
.diff .label{ font-size:12px; color:var(--muted) }
.diff .val{ font-weight:800; font-size:16px }
.pos{ color:var(--up) } .neg{ color:var(--down) }

a:visited{ color: inherit; }
a.cta{ color: var(--primary); }
a.cta:hover{ color: var(--primary-600); }

/* Logo images inside Quick Trade pills */
.pill img.ex-logo{height:18px;vertical-align:middle;display:inline-block}
</style></head><body>
<header class="container"><div class="topbar">
<button id="themeToggle" class="toggle" aria-pressed="false" title="ãƒ†ãƒ¼ãƒåˆ‡æ›¿">â˜€ï¸ / â˜¾</button>
</div><div class="badge">ãƒ˜ãƒƒãƒ€ãƒ¼ã¯ namubit.com ã®ã‚‚ã®ã‚’ä½¿ç”¨</div></header>
<main class="container grid">
<section class="card">
<p class="muted">ãŠå¸°ã‚Šãªã•ã„ â€” å–å¼•ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p>
<h1 class="headline">ã‚¯ã‚¤ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ãƒ‰</h1>
<p class="muted">ã‚ãªãŸã®ãƒãƒ¼ã‚±ãƒƒãƒˆã¸ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯</p>
<div class="pill-row" style="margin-top:12px">
<a class="pill" href="https://www.namubit.com/futures/binance/BTCUSDT"><span class="tag futures">å…ˆç‰©</span><img class="ex-logo" src="bin.png" alt="Binance" /><span class="muted">Go â†’</span></a>
<a class="pill" href="https://www.namubit.com/futures/okx/BTC-USDT-SWAP"><span class="tag futures">å…ˆç‰©</span><img class="ex-logo" src="OPKX.png" alt="OKX" /><span class="muted">Go â†’</span></a>
<a class="pill" href="https://www.namubit.com/spot/binance/BTCUSDT"><span class="tag spot">ç¾ç‰©</span><img class="ex-logo" src="bin.png" alt="Binance" /><span class="muted">Go â†’</span></a>
<a class="pill" href="https://www.namubit.com/spot/okx/BTC-USDT"><span class="tag spot">ç¾ç‰©</span><img class="ex-logo" src="OPKX.png" alt="OKX" /><span class="muted">Go â†’</span></a>
</div>

<!-- Market Search Section -->
<div style="margin-top:22px"></div>
<h2 class="headline" style="font-size:22px; margin:0 0 6px">ãƒãƒ¼ã‚±ãƒƒãƒˆæ¤œç´¢</h2>
<p class="muted help">ã‚·ãƒ³ãƒœãƒ«ã®ã¿å…¥åŠ›ï¼ˆä¾‹ï¼šBTCï¼‰ã€‚USDT ã‚„ -USDT-SWAP ãªã©ã®æ¥å°¾è¾ã¯ä»»æ„ã§ã™ã€‚</p>
<div class="search-wrap">
  <input id="sym" class="input" inputmode="latin" autocomplete="off" placeholder="BTC, ETH, SOLâ€¦" aria-label="ã‚·ãƒ³ãƒœãƒ«" style="flex:1 1 260px; min-width:220px" />
  <button id="go" class="btn">æ¤œç´¢</button>
  <button id="reset" class="btn secondary">ãƒªã‚»ãƒƒãƒˆ</button>
</div>
<div id="results" class="results" aria-live="polite"></div>
<div id="diffs" class="diffs" aria-live="polite"></div>

<div style="margin-top:auto"></div>
</section>
<aside class="card">
<h2 class="headline" style="font-size:22px; margin:0 0 10px">ãƒã‚¤ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ</h2>
<div class="balance"><span>ğŸ’° æ¨å®šæ®‹é«˜</span><span>17,134,231&nbsp;USDT</span></div>
<div style="margin-top:8px"><span class="delta">æœ¬æ—¥ã®å¤‰å‹• +12,340</span></div>
<div class="cta-row">
<a class="btn" href="https://www.namubit.com/wallet">ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã¸</a>
<a class="btn secondary" href="https://www.namubit.com/regist">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</a>
</div>
<p class="muted" style="margin-top:14px">æ•°å€¤ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ¥ç¶šã§å®Ÿãƒ‡ãƒ¼ã‚¿ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚</p>
<div style="margin-top:auto"></div>
</aside>
</main>
<section class="container">
<div class="tiles">
<div class="tile"><h4>ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ã‚¢ã‚¯ã‚»ã‚¹</h4><p class="muted">KYC ã¯ä¸€åº¦ã ã‘ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã§ Binance ã¨ OKX ã‚’å–å¼•ã€‚</p></div>
<div class="tile"><h4>æ©Ÿé–¢æŠ•è³‡å®¶ãƒ¬ãƒ™ãƒ«ã®ä¿ç®¡</h4><p class="muted">Fireblocksï¼ˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹å–å¾—ã®ç¬¬ä¸‰è€…ã‚«ã‚¹ãƒˆãƒ‡ã‚£ï¼‰ã€‚</p></div>
<div class="tile"><h4>AI ä¾¡æ ¼</h4><p class="muted">ãƒ©ã‚¤ãƒ–ä¾¡æ ¼ã¨ã‚¹ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã€ãƒ¡ã‚¤ã‚«ãƒ¼æ°´æº–ã®æ‰‹æ•°æ–™ã¨é€Ÿåº¦ã€‚</p></div>
</div>
</section>
<footer class="container"><div class="badge">ãƒ•ãƒƒã‚¿ãƒ¼ã¯ namubit.com ã®ã‚‚ã®ã‚’ä½¿ç”¨</div></footer>

<script>
// Theme
const root = document.documentElement;
const themeBtn = document.getElementById('themeToggle');
const storedTheme = localStorage.getItem('theme');
if(storedTheme){ root.setAttribute('data-theme', storedTheme); themeBtn?.setAttribute('aria-pressed', storedTheme==='light'); }
themeBtn?.addEventListener('click', () => {
  const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
  root.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
  themeBtn.setAttribute('aria-pressed', next==='light');
});
if(!storedTheme && window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){
  root.setAttribute('data-theme', 'light');
  themeBtn?.setAttribute('aria-pressed', true);
}

// --- Market Search Logic ---
const input = document.getElementById('sym');
const goBtn = document.getElementById('go');
const resetBtn = document.getElementById('reset');
const resultsEl = document.getElementById('results');
const diffsEl = document.getElementById('diffs');

function normalizeSymbol(raw){
  if(!raw) return '';
  let s = (raw + '').toUpperCase().trim();
  // strip common suffixes and separators
  s = s.replace(/[^A-Z0-9\-]/g, '');
  s = s.replace(/-USDT-SWAP$/,'');
  s = s.replace(/-USDT$/,'');
  s = s.replace(/USDT$/,'');
  s = s.replace(/^[\-\s]+|[\-\s]+$/g, '');
  if(s.includes('-')) s = s.split('-')[0];
  return s;
}

function symMap(sym){
  // Build instrument ids for each venue/type
  return {
    binance: {
      spot: { id: sym + 'USDT', trade: `https://www.namubit.com/spot/binance/${sym}USDT` },
      fut:  { id: sym + 'USDT', trade: `https://www.namubit.com/futures/binance/${sym}USDT` }
    },
    okx: {
      spot: { id: sym + '-USDT', trade: `https://www.namubit.com/spot/okx/${sym}-USDT` },
      fut:  { id: sym + '-USDT-SWAP', trade: `https://www.namubit.com/futures/okx/${sym}-USDT-SWAP` }
    }
  };
}

async function fetchFromNamubit(symbol){
  // Try a few likely JSON endpoints FIRST (preferred by request)
  const candidates = [
    `/market?json=1&symbol=${symbol}`,
    `/market.json?symbol=${symbol}`,
    `/api/market?symbol=${symbol}`,
    `/api/quotes?symbol=${symbol}`,
    `/api/v1/quotes?symbol=${symbol}`
  ];
  for(const url of candidates){
    try{
      const r = await fetch(url, { credentials: 'include' });
      if(r.ok){
        const ct = r.headers.get('content-type') || '';
        if(ct.includes('application/json')){
          const j = await r.json();
          // Expect shape like { binance:{spot:{price}, fut:{price}}, okx:{spot:{price}, fut:{price}} }
          if(j && (j.binance || j.okx)) return j;
        }
      }
    }catch(e){ /* ignore and continue */ }
  }
  // As a fallback, attempt to scrape /market for embedded JSON
  try{
    const r = await fetch('/market', { credentials: 'include' });
    if(r.ok){
      const html = await r.text();
      const m = html.match(/<script[^>]*id=["']__DATA__["'][^>]*>([\s\S]*?)<\/script>/);
      if(m){
        const data = JSON.parse(m[1]);
        if(data && (data.binance || data.okx)) return data;
      }
    }
  }catch(e){ /* ignore */ }
  return null;
}

async function fetchDirect(map){
  // Public exchange APIs (used only if NAMUBIT aggregate is unavailable)
  function j(url){ return fetch(url).then(r => r.json()); }
  const [biSpot, biFut, okSpot, okFut] = await Promise.all([
    j(`https://api.binance.com/api/v3/ticker/price?symbol=${map.binance.spot.id}`),
    j(`https://fapi.binance.com/fapi/v1/ticker/price?symbol=${map.binance.fut.id}`),
    j(`https://www.okx.com/api/v5/market/ticker?instId=${map.okx.spot.id}`),
    j(`https://www.okx.com/api/v5/market/ticker?instId=${map.okx.fut.id}`)
  ]);
  const toNum = v => typeof v === 'string' ? parseFloat(v) : (v && v.last ? parseFloat(v.last) : NaN);
  return {
    binance: { spot: { price: parseFloat(biSpot.price) }, fut: { price: parseFloat(biFut.price) } },
    okx: { spot: { price: parseFloat(okSpot.data?.[0]?.last) }, fut: { price: parseFloat(okFut.data?.[0]?.last) } }
  };
}

async function getQuotes(symbol){
  const map = symMap(symbol);
  // 1) Preferred: from NAMUBIT /market (per requirement)
  const fromN = await fetchFromNamubit(symbol);
  if(fromN && fromN.binance && fromN.okx){ return { map, quotes: fromN, source: 'namubit' }; }
  // 2) Fallback: direct from exchanges
  const direct = await fetchDirect(map);
  return { map, quotes: direct, source: 'public' };
}

function fmt(n){ if(n==null || !isFinite(n)) return 'â€”'; return Number(n).toLocaleString(undefined, { maximumFractionDigits: 6 }); }
function pct(a,b){ if(!isFinite(a) || !isFinite(b)) return NaN; const mid=(a+b)/2; return (a-b)/mid*100; }

function render(symbol, map, quotes, source){
  resultsEl.innerHTML = '';
  diffsEl.innerHTML = '';

  const cards = [
    { key:['binance','spot'], label:'BINANCE Â· ç¾ç‰©', inst: map.binance.spot.id, trade: map.binance.spot.trade },
    { key:['okx','spot'],     label:'OKX Â· ç¾ç‰©',     inst: map.okx.spot.id,     trade: map.okx.spot.trade },
    { key:['binance','fut'],  label:'BINANCE Â· å…ˆç‰©', inst: map.binance.fut.id, trade: map.binance.fut.trade },
    { key:['okx','fut'],      label:'OKX Â· å…ˆç‰©',     inst: map.okx.fut.id,     trade: map.okx.fut.trade },
  ];
  const vals = {};
  for(const c of cards){
    const [ex, tp] = c.key; const v = quotes?.[ex]?.[tp]?.price; vals[`${ex}_${tp}`] = v;
    const el = document.createElement('div'); el.className='quote';
    el.innerHTML = `
      <div class="row">
        <div>
          <div class="ex">${c.label}</div>
          <div class="inst">${c.inst}</div>
        </div>
        <div class="px">${fmt(v)}</div>
      </div>
      <a class="cta" href="${c.trade}" aria-label="${symbol} ã‚’ ${c.label} ã§å–å¼•">å–å¼• â†’</a>
    `;
    resultsEl.appendChild(el);
  }

  // Diffs (Binance vs OKX)
  const spotA = vals['binance_spot'], spotB = vals['okx_spot'];
  const futA  = vals['binance_fut'],  futB  = vals['okx_fut'];
  const spotDiff = spotA - spotB; const spotPct = pct(spotA, spotB);
  const futDiff  = futA  - futB;  const futPct  = pct(futA, futB);
  const sClass = spotDiff >= 0 ? 'pos' : 'neg';
  const fClass = futDiff  >= 0 ? 'pos' : 'neg';

  diffsEl.innerHTML = `
    <div class="diff"><div class="label">ç¾ç‰©ä¾¡æ ¼å·® (Binance vs OKX)</div>
      <div class="val ${sClass}">${fmt(spotDiff)} USDT Â· ${isFinite(spotPct)?spotPct.toFixed(3):'â€”'}%</div></div>
    <div class="diff"><div class="label">å…ˆç‰©ä¾¡æ ¼å·® (Binance vs OKX)</div>
      <div class="val ${fClass}">${fmt(futDiff)} USDT Â· ${isFinite(futPct)?futPct.toFixed(3):'â€”'}%</div></div>`;

  // Optional watermark of source
  const small = document.createElement('div');
  small.className='help';
  small.style.marginTop = '8px';
  small.textContent = source === 'namubit' ? 'ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹: NAMUBIT /market' : 'ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹: å„å–å¼•æ‰€ã®å…¬é–‹APIï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰';
  diffsEl.appendChild(small);
}

async function run(symbolRaw){
  const sym = normalizeSymbol(symbolRaw || input.value);
  if(!sym){ input.focus(); return; }
  input.value = sym; // show normalized (e.g., BTC)
  // pre-render skeleton
  resultsEl.innerHTML = '<div class="muted">èª­ã¿è¾¼ã¿ä¸­â€¦</div>';
  diffsEl.innerHTML = '';
  try{
    const { map, quotes, source } = await getQuotes(sym);
    render(sym, map, quotes, source);
  }catch(e){
    resultsEl.innerHTML = '<div class="muted">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚åˆ¥ã®ã‚·ãƒ³ãƒœãƒ«ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚</div>';
  }
}

// Events
goBtn.addEventListener('click', () => run());
resetBtn.addEventListener('click', () => { input.value=''; resultsEl.innerHTML=''; diffsEl.innerHTML=''; input.focus(); });
input.addEventListener('keydown', (e) => { if(e.key==='Enter') run(); });

// Default: preload BTC
run('BTC');
</script>

</body></html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDnWyhKMf8pREN1c36t7cpVwTTU4u1TRbmZsmIDP5ZW%2BDsbFOKOqnq1qQxG5sDIjoNFKlzkZcLiqpRIMzzIsF03nqRL3Sbi%2FR%2FbfExvoPwY9q5lyd2WxnzZE1tlWw8Su1GkDYG%2FNy1ZyzH7FYQQSrmdsJoMbRW2TAfdBYDVwP%2Bk%2FQ3o%2F1KdEAuF3Lgzf5r4TR%2FkvSoADyDCCJAzPDMnpYAjRng1Efanmu3FJ06QddkN9vd7MWMuUfmauvlpeL3Nuz0WmaqwnT6SfN%2FCSv4jkVTRGtEytBG07fVXI9k9E682Tet27AsOWTtflzOjtYrduxZXJ63KUDnM8Jd6tf0CaKtM7GfS5u3da0g3JQY5PZ7ReGx5d4iFfsXSD3km%2BOA%2BXTUQZ%2FhxFc75PrEQb0mVSxWbpow2uz27Z3UfUBqYbMTPudEJ%2BB8rZVHXrkm2z%2B42XgdAugtr10MaljEUJRWyQn2emMIbWgQFK0bHBCKwUKeScVFnD%2BWSjorAbTKP9Y8CCmgSTr393x0AU7Y7l9Y9Jbz34%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDnWyhKMf8pREN1c36t7cpVwTTU4u1TRbmZsmIDP5ZW+DsbFOKOqnq1qQxG5sDIjoNFKlzkZcLiqpRIMzzIsF03nqRL3Sbi/R/bfExvoPwY9q5lyd2WxnzZE1tlWw8Su1GkDYG/Ny1ZyzH7FYQQSrmdsJoMbRW2TAfdBYDVwP+k/Q3o/1KdEAuF3Lgzf5r4TR/kvSoADyDCCJAzPDMnpYAjRng1Efanmu3FJ06QddkN9vd7MWMuUfmauvlpeL3Nuz0WmaqwnT6SfN/CSv4jkVTRGtEytBG07fVXI9k9E682Tet27AsOWTtflzOjtYrduxZXJ63KUDnM8Jd6tf0CaKtM7GfS5u3da0g3JQY5PZ7ReGx5d4iFfsXSD3km+OA+XTUQZ/hxFc75PrEQb0mVSxWbpow2uz27Z3UfUBqYbMTPudEJ+B8rZVHXrkm2z+42XgdAugtr10MaljEUJRWyQn2emMIbWgQFK0bHBCKwUKeScVFnD+WSjorAbTKP9Y8CCmgSTr393x0AU7Y7l9Y9Jbz34=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    